(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(3),s=a(5),l=a(4),i=a(6),o=a(1),c=a(0),u=a.n(c),h=a(9),m=a.n(h),p="INITIAL",d={type:"HELLO",library:"Browser",platform:"React",version:"0.1-alpha"},g=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={address:a.props.address},a.handleInput=a.handleInput.bind(Object(o.a)(Object(o.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(o.a)(Object(o.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"handleInput",value:function(e){this.setState({address:e.target.value})}},{key:"handleSubmit",value:function(){this.props.setConnection("CONNECTING",this.state.address)}},{key:"render",value:function(){var e="Sy\xf6t\xe4 palvelimen osoite";return"NOTFOUND"===this.props.connection&&(e="Yhteytt\xe4 ei saatu avattua, tarkista osoite"),"DISCONNECTED"===this.props.connection&&(e="Yhteys katkesi"),u.a.createElement("div",{id:"dialog"},u.a.createElement("h1",null,e),u.a.createElement("input",{type:"text",value:this.state.address,onChange:this.handleInput}),u.a.createElement("button",{onClick:this.handleSubmit},"Yhdist\xe4"))}}]),t}(u.a.Component),b=a(10),E=a.n(b),v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).updateTick=a.updateTick.bind(Object(o.a)(Object(o.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentDidMount",value:function(){var e=setInterval(this.updateTick,50);this.setState({intervalID:e})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalID)}},{key:"updateTick",value:function(){this.forceUpdate()}},{key:"render",value:function(){return u.a.createElement("div",{id:"telemetry"},u.a.createElement("table",null,u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("th",{colSpan:"2"},"Limit warnings:")),u.a.createElement("tr",null,u.a.createElement("td",null,"Left:"),u.a.createElement("td",null,this.props.limitWarnings.left?"true":"false")),u.a.createElement("tr",null,u.a.createElement("td",null,"Right"),u.a.createElement("td",null,this.props.limitWarnings.right?"true":"false")),u.a.createElement("tr",null,u.a.createElement("td",null,"Upper:"),u.a.createElement("td",null,this.props.limitWarnings.upper?"true":"false")),u.a.createElement("tr",null,u.a.createElement("td",null,"Lower:"),u.a.createElement("td",null,this.props.limitWarnings.lower?"true":"false")),u.a.createElement("tr",null,u.a.createElement("td",null,"Forward:"),u.a.createElement("td",null,this.props.limitWarnings.forward?"true":"false")),u.a.createElement("tr",null,u.a.createElement("td",null,"Property:"),u.a.createElement("td",null,this.props.limitWarnings.property?"true":"false")),u.a.createElement("tr",null,u.a.createElement("td",null,"Overload:"),u.a.createElement("td",null,this.props.limitWarnings.overload?"true":"false")))),u.a.createElement("table",null,u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("th",{colSpan:"2"},"Zero level:")),u.a.createElement("tr",null,u.a.createElement("td",null,"Height from zero:"),u.a.createElement("td",null,Math.round(100*this.props.zeroLevel.height_from_zero)/100)),u.a.createElement("tr",null,u.a.createElement("td",null,"Distance to zero:"),u.a.createElement("td",null,Math.round(100*this.props.zeroLevel.distance_to_zero)/100)),u.a.createElement("tr",null,u.a.createElement("td",null,"Height to slope from zero:"),u.a.createElement("td",null,Math.round(100*this.props.zeroLevel.height_to_slope_from_zero)/100)))),u.a.createElement("table",null,u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("th",{colSpan:"2"},"Euler angles:")),u.a.createElement("tr",null,u.a.createElement("td",null,"Main boom:"),u.a.createElement("td",null,this.props.anglesEuler.boom)),u.a.createElement("tr",null,u.a.createElement("td",null,"Digging arm:"),u.a.createElement("td",null,this.props.anglesEuler.arm)),u.a.createElement("tr",null,u.a.createElement("td",null,"Bucket:"),u.a.createElement("td",null,this.props.anglesEuler.bucket)))),u.a.createElement("table",null,u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("th",{colSpan:"2"},"Quaternion angles:")),u.a.createElement("tr",null,u.a.createElement("td",null,"Main boom:"),u.a.createElement("td",null,this.props.anglesQuaternion.boom)),u.a.createElement("tr",null,u.a.createElement("td",null,"Digging arm:"),u.a.createElement("td",null,this.props.anglesQuaternion.arm)),u.a.createElement("tr",null,u.a.createElement("td",null,"Bucket:"),u.a.createElement("td",null,this.props.anglesQuaternion.bucket)))))}}]),t}(u.a.Component),f=a(7),O=function(e){function t(e){var a;Object(n.a)(this,t);var r=[0,0,0,0,0,0,0,0,0,0];return(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={boomSin:r.map(function(){return Math.sin(Math.PI/180*40)}),boomCos:r.map(function(){return Math.cos(Math.PI/180*40)}),armSin:r.map(function(){return Math.sin(Math.PI/180*-60)}),armCos:r.map(function(){return Math.cos(Math.PI/180*-60)}),bucketSin:r.map(function(){return Math.sin(Math.PI/180*-150)}),bucketCos:r.map(function(){return Math.cos(Math.PI/180*-150)})},a.updateTick=a.updateTick.bind(Object(o.a)(Object(o.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"calculateX",value:function(e,t){var a=Math.floor(Math.abs(Math.cos(e*(Math.PI/180))*t));return-90<=e&&e<=90&&(a*=-1),a}},{key:"calculateY",value:function(e,t){var a=Math.floor(Math.abs(Math.sin(e*(Math.PI/180))*t));return 0<=e&&e<=180&&(a*=-1),a}},{key:"calculateA",value:function(e,t){var a=function(e,t){return e+t},n=e.reduce(a),r=t.reduce(a),s=Math.atan2(n,r);return Math.round(180*s/Math.PI*10)/10}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentDidMount",value:function(){var e=setInterval(this.updateTick,50);this.setState({intervalID:e})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalID)}},{key:"updateTick",value:function(){var e=Object(f.a)(this.state.boomSin);e.shift(),e.push(Math.sin(this.props.boomA*(Math.PI/180)));var t=Object(f.a)(this.state.boomCos);t.shift(),t.push(Math.cos(this.props.boomA*(Math.PI/180)));var a=Object(f.a)(this.state.armSin);a.shift(),a.push(Math.sin(this.props.armA*(Math.PI/180)));var n=Object(f.a)(this.state.armCos);n.shift(),n.push(Math.cos(this.props.armA*(Math.PI/180)));var r=Object(f.a)(this.state.bucketSin);r.shift(),r.push(Math.sin(this.props.bucketA*(Math.PI/180)));var s=Object(f.a)(this.state.bucketCos);s.shift(),s.push(Math.cos(this.props.bucketA*(Math.PI/180))),this.setState({boomSin:e,boomCos:t,armSin:a,armCos:n,bucketSin:r,bucketCos:s});var l=this.calculateA(this.state.boomSin,this.state.boomCos),i=this.calculateA(this.state.armSin,this.state.armCos),o=900+this.calculateX(l,385),c=900+this.calculateY(l,385),u=this.calculateA(this.state.bucketSin,this.state.bucketCos),h=o+this.calculateX(i,176),m=c+this.calculateY(i,176);document.getElementById("SVGBoom").setAttribute("transform","translate(400 400) rotate("+l+" 500 500)"),document.getElementById("SVGArm").setAttribute("transform","translate("+(o-500)+" "+(c-500)+") rotate("+i+" 500 500)"),document.getElementById("SVGBucket").setAttribute("transform","translate("+(h-500)+" "+(m-500)+") rotate("+u+" 500 500)")}},{key:"render",value:function(){return u.a.createElement("div",{id:"visuals"},u.a.createElement("svg",{viewBox:"0 0 1000 1000",preserveAspectRatio:"xMinYMin meet",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},u.a.createElement("g",{transform:"scale(1.2) translate(-200 -200)"},u.a.createElement("path",{id:"SVGBoom",d:"M 112.06,494.03\r C 103.19,500.92 112.00,509.11 117.94,505.97\r 124.83,502.34 121.78,491.03 112.06,494.03 Z\r M 497.06,494.03\r C 488.19,500.92 497.00,509.11 502.94,505.97\r 509.83,502.34 506.78,491.03 497.06,494.03 Z\r M 489.09,540.64\r C 464.07,530.87 359.66,490.66 334.33,480.33\r 318.73,474.36 310.36,474.18 297.33,477.67\r 277.33,483.39 144.78,520.45 119.91,526.82\r 104.64,529.00 92.18,519.36 88.91,507.00\r 86.18,494.91 90.55,481.45 104.27,475.27\r 119.54,469.05 252.88,412.90 300.64,392.45\r 319.18,384.27 336.82,385.36 352.52,392.57\r 402.57,415.75 497.60,453.01 518.64,462.27\r 536.18,470.09 548.09,494.36 539.00,516.67\r 530.82,535.55 509.00,546.91 489.09,540.64 Z"}),u.a.createElement("path",{id:"SVGArm",d:"M 321.45,518.18\r C 333.98,519.14 486.24,526.30 498.17,527.00\r 511.56,527.44 517.50,521.62 521.43,516.74\r 528.87,507.22 561.57,463.31 568.55,454.00\r 574.75,444.81 567.50,431.50 552.00,435.09\r 528.91,439.98 346.42,476.83 324.00,481.27\r 312.39,483.96 306.00,488.43 305.75,500.00\r 305.83,509.30 311.35,516.70 321.45,518.18 Z\r M 321.06,494.03\r C 312.19,500.92 321.00,509.11 326.94,505.97\r 333.83,502.34 330.78,491.03 321.06,494.03 Z\r M 497.06,494.03\r C 488.19,500.92 497.00,509.11 502.94,505.97\r 509.83,502.34 506.78,491.03 497.06,494.03 Z"}),u.a.createElement("path",{id:"SVGBucket",d:"M 515.25,485.38\r C 523.50,457.25 512.88,426.75 485.00,412.38\r 443.25,393.25 412.38,413.88 398.75,437.88\r 392.44,448.49 369.89,488.81 367.00,494.00\r 362.69,501.59 367.41,500.66 371.75,497.50\r 379.26,491.89 387.17,486.42 395.88,480.62\r 415.79,487.00 464.94,502.43 480.17,507.48\r 482.09,515.22 491.09,521.30 500.00,521.57\r 512.78,521.39 518.87,512.39 520.91,505.04\r 522.70,497.43 520.09,489.09 515.25,485.38 Z\r M 497.06,494.03\r C 488.19,500.92 497.00,509.11 502.94,505.97\r 509.83,502.34 506.78,491.03 497.06,494.03 Z"}))))}}]),t}(u.a.Component),k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={limitWarnings:{left:!1,right:!1,upper:!1,lower:!1,forward:!1,property:!1,overload:!1},zeroLevel:{height_from_zero:0,distance_to_zero:0,height_to_slope_from_zero:0},anglesEuler:{boom:0,arm:0,bucket:0},anglesQuaternion:{boom:0,arm:0,bucket:0}},a.websocket=null,a.handleOpen=a.handleOpen.bind(Object(o.a)(Object(o.a)(a))),a.handleClose=a.handleClose.bind(Object(o.a)(Object(o.a)(a))),a.handleMessage=a.handleMessage.bind(Object(o.a)(Object(o.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"convertAngle",value:function(e){var t=2*(e.w*e.x+e.y*e.z),a=1-2*(e.x*e.x+e.y*e.y),n=Math.atan2(t,a);return Math.round(n*(180/Math.PI)*10)/10}},{key:"handleMessage",value:function(e){try{var t=JSON.parse(e);if(t.hasOwnProperty("state")){var a=t.state;a.hasOwnProperty("limitWarnings")&&this.setState({limitWarnings:{left:a.limitWarnings.hasOwnProperty("left")?a.limitWarnings.left:this.state.limitWarnings.left,right:a.limitWarnings.hasOwnProperty("right")?a.limitWarnings.right:this.state.limitWarnings.right,upper:a.limitWarnings.hasOwnProperty("upper")?a.limitWarnings.upper:this.state.limitWarnings.upper,lower:a.limitWarnings.hasOwnProperty("lower")?a.limitWarnings.lower:this.state.limitWarnings.lower,forward:a.limitWarnings.hasOwnProperty("forward")?a.limitWarnings.forward:this.state.limitWarnings.forward,property:a.limitWarnings.hasOwnProperty("property")?a.limitWarnings.property:this.state.limitWarnings.property,overload:a.limitWarnings.hasOwnProperty("overload")?a.limitWarnings.overload:this.state.limitWarnings.overload}}),a.hasOwnProperty("zeroLevel")&&this.setState({zeroLevel:{height_from_zero:a.zeroLevel.hasOwnProperty("height_from_zero")?a.zeroLevel.height_from_zero:this.state.zeroLevel.height_from_zero,distance_to_zero:a.zeroLevel.hasOwnProperty("distance_to_zero")?a.zeroLevel.distance_to_zero:this.state.zeroLevel.distance_to_zero,height_to_slope_from_zero:a.zeroLevel.hasOwnProperty("height_to_slope_from_zero")?a.zeroLevel.height_to_slope_from_zero:this.state.zeroLevel.height_to_slope_from_zero}}),a.hasOwnProperty("angles")&&this.setState({anglesEuler:{boom:a.angles.hasOwnProperty("main_boom")?a.angles.main_boom/10:this.state.anglesEuler.boom,arm:a.angles.hasOwnProperty("digging_arm")?a.angles.digging_arm/10:this.state.anglesEuler.arm,bucket:a.angles.hasOwnProperty("bucket")?a.angles.bucket/10:this.state.anglesEuler.bucket}}),a.hasOwnProperty("quaternions")&&this.setState({anglesQuaternion:{boom:a.quaternions.hasOwnProperty("main_boom_orientation")?this.convertAngle(a.quaternions.main_boom_orientation):this.state.anglesQuaternion.boom,arm:a.quaternions.hasOwnProperty("digging_arm_orientation")?this.convertAngle(a.quaternions.digging_arm_orientation):this.state.anglesQuaternion.arm,bucket:a.quaternions.hasOwnProperty("bucket_orientation")?this.convertAngle(a.quaternions.bucket_orientation):this.state.anglesQuaternion.bucket}})}this.websocket.sendMessage(JSON.stringify({type:"CONFIRM",id:t.id,timestamp:t.timestamp}))}catch(n){alert(n)}}},{key:"handleOpen",value:function(){console.log("Websocket open"),this.props.setConnection("CONNECTED"),this.websocket.sendMessage(JSON.stringify(d))}},{key:"handleClose",value:function(){console.log("Websocket close"),this.props.setConnection("DISCONNECTED")}},{key:"renderPage",value:function(){return"CONNECTED"===this.props.connection?u.a.createElement("div",{id:"wrapper"},u.a.createElement("div",{id:"header"},u.a.createElement("h1",null,"Yhdistetty osoitteeseen ",this.props.address)),u.a.createElement("div",{id:"container"},u.a.createElement(v,{limitWarnings:this.state.limitWarnings,zeroLevel:this.state.zeroLevel,anglesEuler:this.state.anglesEuler,anglesQuaternion:this.state.anglesQuaternion}),u.a.createElement(O,{boomA:this.state.anglesQuaternion.boom,armA:this.state.anglesQuaternion.arm,bucketA:this.state.anglesQuaternion.bucket}))):u.a.createElement("div",{id:"dialog"},u.a.createElement("h1",null,"Yhdistet\xe4\xe4n..."))}},{key:"render",value:function(){var e=this;return u.a.createElement(u.a.Fragment,null,u.a.createElement(E.a,{url:"ws://"+this.props.address+":9000",onMessage:this.handleMessage,onOpen:this.handleOpen,onClose:this.handleClose,reconnect:!1,debug:!0,ref:function(t){e.websocket=t}}),this.renderPage())}}]),t}(u.a.Component),y=(a(17),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={connection:p,address:"10.0.0.184"},a.setConnection=a.setConnection.bind(Object(o.a)(Object(o.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"setConnection",value:function(e,t){switch(e){case"DISCONNECTED":"CONNECTING"===this.state.connection?this.setState({connection:"NOTFOUND"}):this.setState({connection:"DISCONNECTED"});break;case"CONNECTING":this.setState({connection:"CONNECTING",address:t});break;default:this.setState({connection:e})}}},{key:"render",value:function(){return"CONNECTING"===this.state.connection||"CONNECTED"===this.state.connection?u.a.createElement(k,{setConnection:this.setConnection,connection:this.state.connection,address:this.state.address}):u.a.createElement(g,{setConnection:this.setConnection,connection:this.state.connection,address:this.state.address})}}]),t}(u.a.Component));m.a.render(u.a.createElement(y,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.279ee7e5.chunk.js.map